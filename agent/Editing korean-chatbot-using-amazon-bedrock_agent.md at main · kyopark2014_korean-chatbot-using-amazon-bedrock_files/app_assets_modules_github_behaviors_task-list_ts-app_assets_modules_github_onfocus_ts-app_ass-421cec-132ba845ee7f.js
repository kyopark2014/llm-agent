"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_onfocus_ts-app_ass-421cec"],{3694:(e,t,n)=>{n.d(t,{L$:()=>u,SE:()=>_,nj:()=>d});var s,r=n(83833),i=n(59753),l=n(40987),o=n(36071),a=n(65935),c=n(80702);function u(e){if(e.querySelector(".js-task-list-field")){for(let t of e.querySelectorAll("task-lists"))if(t instanceof l.Z)for(let e of(t.disabled=!1,t.querySelectorAll("button")))e.disabled=!1}}function d(e){for(let t of e.querySelectorAll("task-lists"))if(t instanceof l.Z)for(let e of(t.disabled=!0,t.querySelectorAll("button")))e.disabled=!0}function f(e,t,n){let s=e.querySelector(".js-comment-update");d(e),x(e);let r=s.elements.namedItem("task_list_track");r instanceof Element&&r.remove();let i=s.elements.namedItem("task_list_operation");i instanceof Element&&i.remove();let l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","task_list_track"),l.setAttribute("value",t),s.appendChild(l);let o=document.createElement("input");if(o.setAttribute("type","hidden"),o.setAttribute("name","task_list_operation"),o.setAttribute("value",JSON.stringify(n)),s.appendChild(o),!s.elements.namedItem("task_list_key")){let e=s.querySelector(".js-task-list-field").getAttribute("name").split("[")[0],t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","task_list_key"),t.setAttribute("value",e),s.appendChild(t)}e.classList.remove("is-comment-stale"),(0,c.Bt)(s)}(0,o.N7)(".js-task-list-container .js-task-list-field",function(e){let t=e.closest(".js-task-list-container");u(t),x(t)}),(0,o.N7)(".js-convert-tasklist-to-block-enabled .contains-task-list",function(e){let t=L(e);if(!t||Array.from(t.children).some(e=>e.classList.contains("task-list-item-convert-container")))return;let n=e.ownerDocument.querySelector(".js-convert-to-block-template"),s=n?.content.cloneNode(!0);s&&t.appendChild(s)}),(0,i.on)("task-lists-move","task-lists",function(e){let{src:t,dst:n}=e.detail;f(e.currentTarget.closest(".js-task-list-container"),"reordered",{operation:"move",src:t,dst:n})}),(0,i.on)("task-lists-check","task-lists",function(e){let{position:t,checked:n}=e.detail;f(e.currentTarget.closest(".js-task-list-container"),`checked:${n?1:0}`,{operation:"check",position:t,checked:n})}),(0,i.on)("click",".js-convert-to-block-button",function(e){let t=L(e.target);if(!t)return;if(!t.closest("task-lists"))throw Error("parent not found");let n=_(t);f(e.currentTarget.closest(".js-task-list-container"),"converted",{operation:"convert_to_block",position:n})}),(0,a.AC)(".js-task-list-container .js-comment-update",async function(e,t){let n;let s=e.closest(".js-task-list-container"),r=e.elements.namedItem("task_list_track");r instanceof Element&&r.remove();let i=e.elements.namedItem("task_list_operation");i instanceof Element&&i.remove();try{n=await t.json()}catch(t){let e;try{e=JSON.parse(t.response.text)}catch(e){}if(e&&e.stale){let e=s.querySelector(".js-task-list-field");e.classList.add("session-resumable-canceled"),e.classList.remove("js-session-resumable")}else 422===t.response.status||window.location.reload()}n&&(i&&n.json.source&&(s.querySelector(".js-task-list-field").value=n.json.source),u(s),requestAnimationFrame(()=>x(s)))});let m=!1,p=!1,b=null;function h(e){m="insertLineBreak"===e.inputType}function k(e){(m||"insertLineBreak"===e.inputType)&&(function(e){let t=function(e,t){let n=t[0];if(!n||!e)return;let s=e.substring(0,n).split("\n"),r=s[s.length-2],i=r?.match(A);if(!i)return;let l=i[0],o=i[1],a=i[2],c=parseInt(i[3],10),u=!!i[4],d=!isNaN(c),f=d?`${c+1}.`:a,m=`${f} ${u?"[ ] ":""}`,p=e.indexOf("\n",n);p<0&&(p=e.length);let b=e.substring(n,p);if(b.startsWith(m)&&(m=""),r.replace(l,"").trim().length>0||b.trim().length>0){let t=`${o}${m}`,s=e.substring(n),r=t.length,i=[null,null],l=e.substring(0,n)+t+s;if(d&&!e.substring(n).match(/^\s*$/g)){var h,k;h=e.substring(n),k=c+1,t+=s=h.split("\n").map(e=>{if(e.replace(/^\s+/,"").startsWith(`${k}.`)){let t=e.replace(`${k}`,`${k+1}`);return k+=1,t}return e}).join("\n"),i=[n,n+t.length],l=e.substring(0,n)+t}return{text:l,autocompletePrefix:t,selection:[n+r,n+r],commandId:"insertText",writeSelection:i}}{let t=n-`
${l}`.length;return{autocompletePrefix:"",text:e.substring(0,t)+e.substring(n),selection:[t,t],commandId:"delete",writeSelection:[null,null]}}}(e.value,[e.selectionStart,e.selectionEnd]);void 0!==t&&g(e,t)}(e.target),m=!1)}function g(e,t){if(null===b||!0===b){e.contentEditable="true";try{let n;m=!1,"insertText"===t.commandId?(n=t.autocompletePrefix,null!==t.writeSelection[0]&&null!==t.writeSelection[1]&&(e.selectionStart=t.writeSelection[0],e.selectionEnd=t.writeSelection[1])):e.selectionStart=t.selection[0],b=document.execCommand(t.commandId,!1,n)}catch(e){b=!1}e.contentEditable="false"}if(!b){try{document.execCommand("ms-beginUndoUnit")}catch(e){}e.value=t.text;try{document.execCommand("ms-endUndoUnit")}catch(e){}e.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=t.selection[0]&&null!=t.selection[1]&&(e.selectionStart=t.selection[0],e.selectionEnd=t.selection[1])}function v(e){if(!p&&"Enter"===e.key&&e.shiftKey&&!e.metaKey){let t=e.target,n=function(e,t){let n=t[0];if(!n||!e)return;let s=e.substring(0,n).split("\n"),r=s[s.length-1],i=r?.match(w);if(!i)return;let l=i[1]||"",o=`
${l}`;return{text:e.substring(0,n)+o+e.substring(n),autocompletePrefix:o,selection:[n+o.length,n+o.length],commandId:"insertText",writeSelection:[null,null]}}(t.value,[t.selectionStart,t.selectionEnd]);void 0!==n&&(g(t,n),e.preventDefault(),(0,i.f)(t,"change"))}}function E(){p=!0}function y(){p=!1}function S(e){if(p)return;if("Escape"===e.key){!function(e){let t=e.target;"backward"===t.selectionDirection?t.selectionEnd=t.selectionStart:t.selectionStart=t.selectionEnd}(e);return}if("Tab"!==e.key)return;let t=e.target,n=function(e,t,n){let s=t[0]||0,r=t[1]||s;if(null===t[0]||s===r)return;let i=e.substring(0,s).lastIndexOf("\n")+1,l=e.indexOf("\n",r-1),o=l>0?l:e.length-1,a=e.substring(i,o).split("\n"),c=!1,u=0,d=0,f=[];for(let e of a){let t=e.match(/^\s*/);if(t){let s=t[0],r=e.substring(s.length);if(n){let e=s.length;s=s.slice(0,-2),u=c?u:s.length-e,c=!0,d+=s.length-e}else s+="  ",u=2,d+=2;f.push(s+r)}}let m=f.join("\n");return{text:e.substring(0,i)+m+e.substring(o),selection:[Math.max(i,s+u),r+d],autocompletePrefix:m,commandId:"insertText",writeSelection:[i,o]}}(t.value,[t.selectionStart,t.selectionEnd],e.shiftKey);void 0!==n&&(e.preventDefault(),g(t,n))}(0,o.N7)(".js-task-list-field",{subscribe:e=>(0,r.qC)((0,r.RB)(e,"keydown",S),(0,r.RB)(e,"keydown",v),(0,r.RB)(e,"beforeinput",h),(0,r.RB)(e,"input",k),(0,r.RB)(e,"compositionstart",E),(0,r.RB)(e,"compositionend",y))}),function(e){e.insertText="insertText",e.delete="delete"}(s||(s={}));let w=/^(\s*)?/,A=/^(\s*)([*-]|(\d+)\.)\s(\[[\sx]\]\s)?/;function _(e){let t=e.closest("task-lists");if(!t)throw Error("parent not found");return Array.from(t.querySelectorAll("ol, ul")).filter(e=>!e.closest("tracking-block")).indexOf(e)}function x(e){if(0===document.querySelectorAll("tracked-issues-progress").length||e.closest(".js-timeline-item"))return;let t=e.querySelectorAll(".js-comment-body [type=checkbox]"),n=t.length,s=Array.from(t).filter(e=>e.checked).length;for(let e of document.querySelectorAll("tracked-issues-progress[data-type=checklist]"))e.setAttribute("data-completed",String(s)),e.setAttribute("data-total",String(n))}function L(e){let t=e.closest(".contains-task-list"),n=t;for(;(n=n.parentElement.closest(".contains-task-list"))!==t&&null!==n;)t=n;return t}},9238:(e,t,n)=>{n.d(t,{ZG:()=>o,q6:()=>c,w4:()=>a});var s=n(8439);let r=!1,i=new s.Z;function l(e){let t=e.target;if(t instanceof HTMLElement&&t.nodeType!==Node.DOCUMENT_NODE)for(let e of i.matches(t))e.data.call(null,t)}function o(e,t){r||(r=!0,document.addEventListener("focus",l,!0)),i.add(e,t),document.activeElement instanceof HTMLElement&&document.activeElement.matches(e)&&t(document.activeElement)}function a(e,t,n){function s(t){let r=t.currentTarget;r&&(r.removeEventListener(e,n),r.removeEventListener("blur",s))}o(t,function(t){t.addEventListener(e,n),t.addEventListener("blur",s)})}function c(e,t){function n(e){let{currentTarget:s}=e;s&&(s.removeEventListener("input",t),s.removeEventListener("blur",n))}o(e,function(e){e.addEventListener("input",t),e.addEventListener("blur",n)})}},57481:(e,t,n)=>{n.d(t,{Z:()=>u});var s=n(12040),r=n(34532);function i(e){let t=document.querySelector(".sso-modal");t&&(t.classList.remove("success","error"),e?t.classList.add("success"):t.classList.add("error"))}async function l(){let e=document.querySelector("link[rel=sso-modal]"),t=await (0,s.W)({content:(0,r.a_)(document,e.href),dialogClass:"sso-modal"}),n=null,l=window.external;if(l.ssoComplete=function(e){e.error?i(n=!1):(i(n=!0),function(e){let t=document.querySelector("meta[name=sso-expires-around]");t&&t.setAttribute("content",e)}(e.expiresAround),window.focus()),l.ssoComplete=null},await new Promise(e=>{t.addEventListener("dialog:remove",e,{once:!0})}),!n)throw Error("sso prompt canceled")}async function o(){let e=document.querySelector("link[rel=sso-session]"),t=document.querySelector("meta[name=sso-expires-around]");if(!(e instanceof HTMLLinkElement)||!function(e){if(!(e instanceof HTMLMetaElement))return!0;let t=parseInt(e.content);return new Date().getTime()/1e3>t}(t))return!0;let n=e.href,s=await fetch(n,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});return await s.json()}(0,n(36071).N7)(".js-sso-modal-complete",function(e){if(window.opener&&window.opener.external.ssoComplete){let t=e.getAttribute("data-error"),n=e.getAttribute("data-expires-around");window.opener.external.ssoComplete({error:t,expiresAround:n}),window.close()}else{let t=e.getAttribute("data-fallback-url");t&&(window.location.href=t)}});let a=null;function c(){a=null}async function u(){await o()||(a||(a=l().then(c).catch(c)),await a)}},71483:(e,t,n)=>{n.d(t,{DV:()=>i,D_:()=>s.D_,EL:()=>s.EL,N9:()=>s.N9,Tz:()=>s.Tz,k0:()=>s.k0});var s=n(11793);let r=/(?:^|,)((?:[^,]|,(?=\+| |$))*(?:,(?=,))?)/g;function i(e){return Array.from(e.matchAll(r)).map(([,e])=>e)}},85772:(e,t,n)=>{n.d(t,{Ty:()=>i,YE:()=>l,Zf:()=>a});var s=n(18515),r=n(71483);let i=()=>{let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");return!e||"all"===e.content},l=e=>/Enter|Arrow|Escape|Meta|Control|Mod|Esc/.test(e)||e.includes("Alt")&&e.includes("Shift"),o=new Set(["button","checkbox","color","file","hidden","image","radio","range","reset","submit"]),a=e=>{let t=(0,r.EL)(e),n=function(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=e.getAttribute("type")?.toLowerCase()??"text",s="true"===e.ariaReadOnly||"true"===e.getAttribute("aria-readonly")||null!==e.getAttribute("readonly");return("select"===t||"textarea"===t||"input"===t&&!o.has(n)||e.isContentEditable)&&!s}(e.target)&&(0,s.cr)("no_character_key_shortcuts_in_inputs"),a=i()&&!n;return l(t)||a}},90804:(e,t,n)=>{n.d(t,{Q:()=>s});let s=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},83833:(e,t,n)=>{n.d(t,{RB:()=>s,qC:()=>r,w0:()=>Subscription});let Subscription=class Subscription{constructor(e){this.closed=!1,this.unsubscribe=()=>{e(),this.closed=!0}}};function s(e,t,n,s={capture:!1}){return e.addEventListener(t,n,s),new Subscription(()=>{e.removeEventListener(t,n,s)})}function r(...e){return new Subscription(()=>{for(let t of e)t.unsubscribe()})}}}]);
//# sourceMappingURL=app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_onfocus_ts-app_ass-421cec-1cbd4863a4b4.js.map